/* ═══════════════════════════════════════════════════════════
   Financial Audit Dashboard — Premium Professional Design
   ═══════════════════════════════════════════════════════════ */

@import url('https://fonts.googleapis.com/css2?family=Cairo:wght@300;400;500;600;700;800;900&display=swap');

:root {
	--fa-primary: #1e40af;
	--fa-primary-light: #3b82f6;
	--fa-success: #047857;
	--fa-success-light: #10b981;
	--fa-danger: #b91c1c;
	--fa-danger-light: #ef4444;
	--fa-warning: #b45309;
	--fa-warning-light: #f59e0b;
	--fa-purple: #6d28d9;
	--fa-pink: #be185d;
	--fa-teal: #0f766e;
	--fa-orange: #c2410c;
	--fa-slate: #334155;
	--fa-border: #e2e8f0;
	--fa-border-light: #f1f5f9;
	--fa-text: #0f172a;
	--fa-text-mid: #334155;
	--fa-text-sub: #64748b;
	--fa-text-muted: #94a3b8;
	--fa-radius: 8px;
	--fa-shadow-sm: 0 1px 2px rgba(0,0,0,0.04);
	--fa-shadow: 0 1px 3px rgba(0,0,0,0.06), 0 1px 2px rgba(0,0,0,0.04);
	--fa-shadow-md: 0 4px 6px rgba(0,0,0,0.04), 0 2px 4px rgba(0,0,0,0.03);
}

/* ─── Force Font Everywhere ────────────────────── */
.financial-audit-page,
.financial-audit-page *,
.financial-audit-page table,
.financial-audit-page th,
.financial-audit-page td,
.financial-audit-page label,
.financial-audit-page input,
.financial-audit-page select,
.financial-audit-page button,
.financial-audit-page span,
.financial-audit-page div,
.financial-audit-page p,
.financial-audit-page h1,
.financial-audit-page h2,
.financial-audit-page h3,
.financial-audit-page h4,
.financial-audit-page a {
	font-family: 'Cairo', 'Segoe UI', Tahoma, Arial, sans-serif !important;
}

/* ─── Page ─────────────────────────────────────── */
.financial-audit-page {
	padding: 24px 28px;
	direction: rtl;
	text-align: right;
	width: 100%;
	background: #f8fafc;
	min-height: 100vh;
	font-size: 15px;
	line-height: 1.8;
	color: var(--fa-text);
	-webkit-font-smoothing: antialiased;
	-moz-osx-font-smoothing: grayscale;
}

/* ─── Filters ──────────────────────────────────── */
.filters-section {
	background: #fff;
	padding: 16px 20px;
	margin-bottom: 20px;
	border-radius: var(--fa-radius);
	border: 1px solid var(--fa-border);
	box-shadow: var(--fa-shadow-sm);
}

.filters-row {
	display: flex;
	flex-wrap: wrap;
	gap: 16px;
	align-items: flex-end;
}

.filter-field {
	flex: 1;
	min-width: 200px;
}

.filter-field label {
	display: block;
	font-weight: 700 !important;
	margin-bottom: 4px;
	color: var(--fa-text-mid);
	font-size: 13px;
	letter-spacing: 0.01em;
}

/* ─── KPI Cards ────────────────────────────────── */
.kpi-cards {
	display: grid;
	grid-template-columns: repeat(6, 1fr);
	gap: 14px;
	margin-bottom: 24px;
}

.kpi-card {
	background: #fff;
	padding: 18px 14px 16px;
	border-radius: var(--fa-radius);
	text-align: center;
	border: 1px solid var(--fa-border);
	box-shadow: var(--fa-shadow-sm);
	transition: all 0.2s ease;
	position: relative;
	overflow: hidden;
}

.kpi-card::before {
	content: '';
	position: absolute;
	top: 0; right: 0; left: 0;
	height: 3px;
}

.kpi-card:hover {
	box-shadow: var(--fa-shadow-md);
	transform: translateY(-1px);
}

.kpi-card .kpi-icon {
	width: 40px; height: 40px;
	border-radius: 10px;
	display: flex; align-items: center; justify-content: center;
	margin: 0 auto 8px;
	font-size: 15px;
}

.kpi-card .kpi-title {
	font-size: 13px;
	color: var(--fa-text-sub);
	margin-bottom: 6px;
	font-weight: 700 !important;
}

.kpi-card .kpi-value {
	font-size: 18px;
	font-weight: 800 !important;
	direction: ltr;
	letter-spacing: -0.02em;
}

.kpi-card .kpi-desc {
	font-size: 11px;
	color: var(--fa-text-muted);
	font-weight: 500 !important;
	margin-top: 6px;
	line-height: 1.5;
}

/* KPI colors */
.kpi-card.revenue::before { background: var(--fa-success); }
.kpi-card.revenue .kpi-value { color: var(--fa-success); }
.kpi-card.revenue .kpi-icon { background: #ecfdf5; color: var(--fa-success); }

.kpi-card.cogs::before { background: var(--fa-orange); }
.kpi-card.cogs .kpi-value { color: var(--fa-orange); }
.kpi-card.cogs .kpi-icon { background: #fff7ed; color: var(--fa-orange); }

.kpi-card.profit::before { background: var(--fa-primary); }
.kpi-card.profit .kpi-value { color: var(--fa-primary); }
.kpi-card.profit .kpi-icon { background: #eff6ff; color: var(--fa-primary); }

.kpi-card.loss::before { background: var(--fa-danger); }
.kpi-card.loss .kpi-value { color: var(--fa-danger); }
.kpi-card.loss .kpi-icon { background: #fef2f2; color: var(--fa-danger); }

.kpi-card.margin::before { background: var(--fa-purple); }
.kpi-card.margin .kpi-value { color: var(--fa-purple); }
.kpi-card.margin .kpi-icon { background: #f5f3ff; color: var(--fa-purple); }

.kpi-card.receivable::before { background: var(--fa-pink); }
.kpi-card.receivable .kpi-value { color: var(--fa-pink); }
.kpi-card.receivable .kpi-icon { background: #fdf2f8; color: var(--fa-pink); }

.kpi-card.payable::before { background: var(--fa-warning); }
.kpi-card.payable .kpi-value { color: var(--fa-warning); }
.kpi-card.payable .kpi-icon { background: #fffbeb; color: var(--fa-warning); }

.kpi-card.cash::before { background: var(--fa-teal); }
.kpi-card.cash .kpi-value { color: var(--fa-teal); }
.kpi-card.cash .kpi-icon { background: #f0fdfa; color: var(--fa-teal); }

.kpi-card.inventory::before { background: var(--fa-slate); }
.kpi-card.inventory .kpi-value { color: var(--fa-slate); }
.kpi-card.inventory .kpi-icon { background: #f1f5f9; color: var(--fa-slate); }

/* ─── Sections ─────────────────────────────────── */
.data-section,
.chart-section {
	background: #fff;
	border-radius: var(--fa-radius);
	border: 1px solid var(--fa-border);
	margin-bottom: 14px;
	overflow: hidden;
	width: 100%;
	box-shadow: var(--fa-shadow-sm);
}

.section-header {
	display: flex;
	justify-content: space-between;
	align-items: center;
	padding: 14px 20px;
	border-bottom: 1px solid var(--fa-border);
	cursor: pointer;
	user-select: none;
	transition: background 0.15s;
}

.section-header:hover {
	background: #f8fafc;
}

.section-header .section-icon {
	width: 30px; height: 30px;
	border-radius: 8px;
	display: inline-flex; align-items: center; justify-content: center;
	margin-left: 10px;
	font-size: 13px;
	flex-shrink: 0;
}

.section-title {
	font-size: 15px;
	font-weight: 800 !important;
	color: var(--fa-text);
	display: flex;
	align-items: center;
	gap: 6px;
}

.section-desc {
	font-size: 13px;
	color: var(--fa-text-muted);
	font-weight: 500 !important;
	padding: 0 20px 10px;
	border-bottom: 1px solid var(--fa-border-light);
}

.section-body {
	padding: 0;
	overflow-x: auto;
	overflow-y: auto;
	max-height: 500px;
}

.section-body::-webkit-scrollbar { width: 4px; height: 4px; }
.section-body::-webkit-scrollbar-track { background: transparent; }
.section-body::-webkit-scrollbar-thumb { background: #cbd5e1; border-radius: 2px; }

.toggle-chevron {
	font-size: 10px;
	color: var(--fa-text-muted);
	transition: transform 0.2s ease;
	padding: 4px 6px;
}

.toggle-chevron.collapsed {
	transform: rotate(-90deg);
}

/* ─── Chart Containers ─────────────────────────── */
.chart-container {
	padding: 16px;
	min-height: 360px;
	direction: ltr;
}

/* ─── Tables ───────────────────────────────────── */
.audit-table {
	width: 100%;
	border-collapse: collapse;
}

.audit-table th,
.audit-table td {
	padding: 11px 16px;
	text-align: right;
	border-bottom: 1px solid var(--fa-border-light);
	font-size: 14px;
	font-weight: 500 !important;
	white-space: nowrap;
}

.audit-table th {
	font-weight: 800 !important;
	color: var(--fa-text-sub);
	font-size: 12px;
	text-transform: uppercase;
	letter-spacing: 0.03em;
	border-bottom: 2px solid var(--fa-border);
	position: sticky;
	top: 0;
	z-index: 2;
	background: #fff;
}

.audit-table tbody tr:hover {
	background: #f8fafc;
}

.audit-table .currency {
	font-variant-numeric: tabular-nums;
	font-weight: 700 !important;
}

.audit-table .positive { color: var(--fa-success); font-weight: 800 !important; }
.audit-table .negative { color: var(--fa-danger); font-weight: 800 !important; }

.audit-table a {
	color: var(--fa-primary-light);
	text-decoration: none;
	font-weight: 700 !important;
}

.audit-table a:hover {
	text-decoration: underline;
	color: var(--fa-primary);
}

.audit-table td:first-child,
.audit-table th:first-child {
	text-align: center;
	width: 40px;
	color: var(--fa-text-muted);
}

/* ─── P&L ──────────────────────────────────────── */
.pnl-row.parent td {
	font-weight: 800 !important;
	background: #f8fafc;
	padding-top: 12px; padding-bottom: 12px;
}

.pnl-row.parent.income-header td { color: var(--fa-success); border-right: 3px solid var(--fa-success); }
.pnl-row.parent.expense-header td { color: var(--fa-danger); border-right: 3px solid var(--fa-danger); }
.pnl-row.child td:nth-child(2) { padding-right: 32px; }

.pnl-row.total td {
	font-weight: 900 !important;
	font-size: 14px;
	border-top: 2px solid var(--fa-text);
	background: #f1f5f9;
	padding-top: 12px; padding-bottom: 12px;
}

/* ─── Badges ───────────────────────────────────── */
.collection-bar { height: 6px; background: #e2e8f0; border-radius: 3px; overflow: hidden; margin-bottom: 2px; min-width: 50px; }
.collection-bar .fill { height: 100%; border-radius: 3px; }
.collection-bar .fill.good { background: var(--fa-success-light); }
.collection-bar .fill.medium { background: var(--fa-warning-light); }
.collection-bar .fill.poor { background: var(--fa-danger-light); }
.collection-rate-text { font-size: 10px; font-weight: 800 !important; color: var(--fa-text-sub); text-align: center; }

.aging-badge, .account-type-badge, .payment-type-badge {
	display: inline-flex; align-items: center; gap: 3px;
	padding: 3px 10px; border-radius: 12px;
	font-size: 11px; font-weight: 700 !important; white-space: nowrap;
}

.aging-badge.current { background: #ecfdf5; color: #065f46; }
.aging-badge.warning { background: #fffbeb; color: #92400e; }
.aging-badge.overdue { background: #fef2f2; color: #991b1b; }

.account-type-badge.bank-type { background: #eff6ff; color: #1e40af; }
.account-type-badge.cash-type { background: #ecfdf5; color: #065f46; }

.payment-type-badge.receive { background: #ecfdf5; color: #065f46; }
.payment-type-badge.pay { background: #fef2f2; color: #991b1b; }
.payment-type-badge.transfer { background: #eff6ff; color: #1e40af; }

.section-count {
	display: inline-flex; align-items: center; justify-content: center;
	background: var(--fa-primary); color: white;
	font-size: 10px; font-weight: 800 !important;
	padding: 2px 8px; border-radius: 10px; min-width: 22px;
}

.table-total-row td {
	font-weight: 800 !important;
	border-top: 2px solid var(--fa-slate) !important;
	background: #f1f5f9 !important;
	padding-top: 10px !important; padding-bottom: 10px !important;
	color: var(--fa-text) !important;
}

/* ─── Chart Stats ──────────────────────────────── */
.chart-stats {
	display: flex; justify-content: center; gap: 28px;
	padding: 14px 16px; border-top: 1px solid var(--fa-border);
	background: #fafbfc;
}

.chart-stat-label { font-size: 10px; color: var(--fa-text-muted); font-weight: 700 !important; text-transform: uppercase; letter-spacing: 0.04em; margin-bottom: 2px; }
.chart-stat-value { font-size: 14px; font-weight: 800 !important; color: var(--fa-text); direction: ltr; }
.chart-stat-value.positive { color: var(--fa-success); }
.chart-stat-value.negative { color: var(--fa-danger); }

/* ─── AI Section ───────────────────────────────── */
.ai-analysis-section {
	background: #fff;
	border-radius: var(--fa-radius);
	border: 1px solid var(--fa-primary-light);
	margin-bottom: 20px;
	overflow: hidden;
	box-shadow: 0 0 0 1px rgba(59,130,246,0.1), var(--fa-shadow);
}

.ai-analysis-section .ai-header {
	border-bottom: 1px solid var(--fa-border);
	background: linear-gradient(135deg, #eff6ff 0%, #f0f9ff 100%);
}
.ai-analysis-section .section-title { font-weight: 800 !important; font-size: 15px; color: var(--fa-primary); }

.ai-analysis-section .close-ai-btn {
	color: var(--fa-text-sub); border: 1px solid var(--fa-border);
	background: #fff; border-radius: 6px; padding: 2px 12px; font-weight: 800 !important;
	transition: all 0.15s;
}
.ai-analysis-section .close-ai-btn:hover { background: #fef2f2; border-color: var(--fa-danger-light); color: var(--fa-danger); }

.ai-report {
	padding: 28px 32px; color: var(--fa-text);
	line-height: 2; font-size: 14px;
}

.ai-report-header {
	display: flex; align-items: center; gap: 10px;
	margin-bottom: 24px; padding-bottom: 14px; border-bottom: 2px solid var(--fa-primary);
	font-size: 17px; font-weight: 800 !important; color: var(--fa-primary);
}

.ai-report-header .ai-date { margin-right: auto; font-size: 12px; color: var(--fa-text-muted); font-weight: 500 !important; }

.ai-report h2 { font-size: 18px; font-weight: 900 !important; color: var(--fa-text); margin: 24px 0 10px; padding-bottom: 6px; border-bottom: 2px solid var(--fa-border); }
.ai-report h3 { font-size: 16px; font-weight: 800 !important; color: var(--fa-text-mid); margin: 20px 0 8px; padding-bottom: 4px; border-bottom: 1px solid var(--fa-border); }
.ai-report h4 { font-size: 14px; font-weight: 700 !important; color: var(--fa-text-mid); margin: 16px 0 6px; }
.ai-report ul { padding-right: 20px; margin: 8px 0; }
.ai-report li { margin-bottom: 6px; font-weight: 500 !important; line-height: 1.8; }
.ai-report strong { color: var(--fa-primary); font-weight: 800 !important; }
.ai-report p { margin-bottom: 10px; font-weight: 500 !important; }

.ai-summary-grid { display: grid; grid-template-columns: repeat(4, 1fr); gap: 14px; margin-bottom: 24px; }

.ai-summary-card {
	border: 1px solid var(--fa-border); border-radius: 10px;
	padding: 18px 14px; text-align: center;
	background: #fff; transition: box-shadow 0.15s;
}
.ai-summary-card:hover { box-shadow: var(--fa-shadow-md); }
.ai-summary-card .label { font-size: 10px; color: var(--fa-text-muted); margin-bottom: 6px; font-weight: 800 !important; text-transform: uppercase; letter-spacing: 0.05em; }
.ai-summary-card .value { font-size: 22px; font-weight: 900 !important; direction: ltr; letter-spacing: -0.02em; }
.ai-summary-card .sub { font-size: 11px; font-weight: 700 !important; margin-top: 4px; }

.ai-data-table { width: 100%; border-collapse: collapse; font-size: 13px; margin-bottom: 16px; }
.ai-data-table th { padding: 8px 12px; text-align: right; color: var(--fa-text-sub); font-weight: 800 !important; font-size: 10px; text-transform: uppercase; letter-spacing: 0.03em; border-bottom: 2px solid var(--fa-border); }
.ai-data-table td { padding: 7px 12px; border-bottom: 1px solid var(--fa-border-light); font-weight: 500 !important; }
.ai-data-table td.num { color: var(--fa-text-muted); font-weight: 800 !important; text-align: center; width: 28px; }
.ai-data-table td.currency-val { direction: ltr; text-align: left; font-weight: 800 !important; }
.ai-data-table tbody tr:hover { background: #f8fafc; }

.ai-section-title { font-size: 15px; font-weight: 800 !important; color: var(--fa-text); margin: 0 0 12px; padding-bottom: 8px; border-bottom: 2px solid var(--fa-border); display: flex; align-items: center; gap: 8px; }
.ai-section-title i { color: var(--fa-primary-light); font-size: 14px; }

.ai-analysis-section .loading-state,
.ai-analysis-section .empty-state { color: var(--fa-text); }

/* ─── Risk Matrix (AI) ─────────────────────────── */
.ai-risk-card { border: 1px solid var(--fa-border); border-radius: 8px; padding: 12px 16px; margin-bottom: 10px; border-right: 4px solid; }
.ai-risk-card.high { border-right-color: var(--fa-danger); background: #fef2f2; }
.ai-risk-card.medium { border-right-color: var(--fa-warning); background: #fffbeb; }
.ai-risk-card.low { border-right-color: var(--fa-success); background: #ecfdf5; }
.ai-risk-title { font-weight: 800 !important; font-size: 13px; margin-bottom: 4px; }
.ai-risk-desc { font-size: 12px; color: var(--fa-text-sub); font-weight: 500 !important; }
.ai-risk-badge { display: inline-block; font-size: 10px; font-weight: 800 !important; padding: 1px 8px; border-radius: 8px; margin-bottom: 6px; }
.ai-risk-badge.high { background: var(--fa-danger); color: white; }
.ai-risk-badge.medium { background: var(--fa-warning); color: white; }
.ai-risk-badge.low { background: var(--fa-success); color: white; }

/* ─── Score Gauge (AI) ─────────────────────────── */
.ai-gauge { position: relative; width: 120px; height: 120px; margin: 0 auto 8px; }
.ai-gauge-circle {
	width: 120px; height: 120px; border-radius: 50%;
	display: flex; align-items: center; justify-content: center; flex-direction: column;
	border: 6px solid var(--fa-border);
}
.ai-gauge-score { font-size: 32px; font-weight: 900 !important; line-height: 1; }
.ai-gauge-label { font-size: 11px; font-weight: 700 !important; margin-top: 2px; }

/* ─── States ───────────────────────────────────── */
.empty-state { text-align: center; padding: 36px 20px; color: var(--fa-text-muted); }
.empty-state .empty-icon { width: 44px; height: 44px; border-radius: 12px; background: #f1f5f9; display: flex; align-items: center; justify-content: center; margin: 0 auto 10px; font-size: 18px; color: #cbd5e1; }
.empty-state p { font-size: 13px; font-weight: 500 !important; }

.loading-state { text-align: center; padding: 36px; color: var(--fa-text-sub); font-size: 14px; font-weight: 500 !important; }
.loading-state i { margin-left: 8px; }

/* ─── Responsive ───────────────────────────────── */
@media (max-width: 1200px) {
	.kpi-cards { grid-template-columns: repeat(4, 1fr); }
	.ai-summary-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
	.financial-audit-page { padding: 12px; }
	.kpi-cards { grid-template-columns: repeat(2, 1fr); gap: 8px; }
	.filters-row { flex-direction: column; }
	.filter-field { width: 100%; min-width: unset; }
	.chart-stats { flex-wrap: wrap; gap: 12px; }
	.section-header { padding: 12px 16px; }
	.ai-summary-grid { grid-template-columns: 1fr 1fr; }
}

@media (max-width: 480px) {
	.kpi-cards { grid-template-columns: 1fr 1fr; }
	.ai-report { padding: 16px; font-size: 13px; }
	.chart-container { padding: 10px; min-height: 260px; }
	.ai-summary-grid { grid-template-columns: 1fr; }
}

/* ─── Advanced Audit Divider ──────────────── */
.audit-divider {
	text-align: center;
	margin: 32px 0 20px;
	position: relative;
}

.audit-divider::before {
	content: '';
	position: absolute;
	top: 50%;
	left: 0;
	right: 0;
	height: 2px;
	background: linear-gradient(90deg, transparent, var(--fa-primary-light), transparent);
}

.audit-divider span {
	position: relative;
	background: #f8fafc;
	padding: 6px 20px;
	font-size: 15px;
	font-weight: 800 !important;
	color: var(--fa-primary);
	letter-spacing: 0.02em;
	border-radius: 20px;
	border: 2px solid var(--fa-primary-light);
	display: inline-flex;
	align-items: center;
	gap: 8px;
}

.audit-divider span i {
	font-size: 14px;
	color: var(--fa-primary-light);
}

/* ─── Audit Metrics Grid ─────────────────── */
.audit-metrics-grid {
	display: grid;
	grid-template-columns: repeat(4, 1fr);
	gap: 14px;
}

.metric-card {
	background: #fff;
	border: 1px solid var(--fa-border);
	border-radius: 10px;
	padding: 16px 14px;
	text-align: center;
	transition: all 0.2s ease;
	position: relative;
}

.metric-card:hover {
	box-shadow: var(--fa-shadow-md);
	transform: translateY(-1px);
}

.metric-card.highlight {
	border-color: var(--fa-primary-light);
	background: linear-gradient(135deg, #eff6ff 0%, #fff 100%);
	box-shadow: 0 0 0 1px rgba(59,130,246,0.1), var(--fa-shadow);
}

.metric-icon {
	width: 36px;
	height: 36px;
	border-radius: 10px;
	display: flex;
	align-items: center;
	justify-content: center;
	margin: 0 auto 8px;
	font-size: 14px;
}

.metric-label {
	font-size: 11px;
	font-weight: 700 !important;
	color: var(--fa-text-sub);
	margin-bottom: 6px;
	line-height: 1.4;
}

.metric-value {
	font-size: 22px;
	font-weight: 900 !important;
	direction: ltr;
	letter-spacing: -0.02em;
	line-height: 1.2;
}

.metric-value small {
	font-size: 12px;
	font-weight: 700 !important;
	color: var(--fa-text-muted);
}

.metric-sub {
	font-size: 10px;
	font-weight: 700 !important;
	color: var(--fa-text-muted);
	margin-top: 4px;
	text-transform: uppercase;
	letter-spacing: 0.03em;
}

/* ─── Benford Stats ──────────────────────── */
.benford-stats {
	padding: 12px 20px;
	border-top: 1px solid var(--fa-border);
	display: flex;
	gap: 24px;
	justify-content: center;
	flex-wrap: wrap;
	background: #fafbfc;
}

/* ─── Responsive: Advanced Sections ──────── */
@media (max-width: 1200px) {
	.audit-metrics-grid { grid-template-columns: repeat(2, 1fr); }
}

@media (max-width: 768px) {
	.audit-metrics-grid { grid-template-columns: 1fr 1fr; gap: 8px; }
	.metric-value { font-size: 18px; }
	.audit-divider span { font-size: 13px; padding: 4px 14px; }
}

@media (max-width: 480px) {
	.audit-metrics-grid { grid-template-columns: 1fr; }
}

@media print {
	.financial-audit-page { background: white; padding: 0; }
	.filters-section, .toggle-chevron, .ai-analysis-section { display: none !important; }
	.data-section, .chart-section { box-shadow: none; border: 1px solid #ddd; break-inside: avoid; }
	.section-body { max-height: unset !important; overflow: visible !important; display: block !important; }
	.audit-divider span { border: 1px solid #999; background: white; }
	.audit-metrics-grid { grid-template-columns: repeat(4, 1fr); }
}
